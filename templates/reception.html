{% extends "layout.html" %}

{% block title %}Tableau de Bord R√©ception{% endblock %}

{% block content %}
<style>
    .reception-grid {
        display: grid;
        grid-template-columns: 3fr 1fr;
        gap: 2rem;
        align-items: flex-start;
    }
    .widget-card {
        background: #fff;
        padding: 1.5rem;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    }
</style>

<h1>Tableau de Bord R√©ception</h1>

<div class="reception-grid">
    <div class="main-content">
        <a href="{{ url_for('show_checkin_form') }}" class="btn btn-primary" style="margin-bottom: 1.5rem;">üîë Nouveau Check-in</a>
        <h2>S√©jours en Cours</h2>

    <table class="dashboard-table">
        <thead>
            <tr>
                <th>Chambre N¬∞</th>
                <th>Nom du Client</th>
                <th>Date d'Arriv√©e</th>
                <th>Solde Actuel (FCFA)</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for stay in active_stays %}
                <tr>
                    <td><strong>{{ stay.numero }}</strong></td>
                    <td>{{ stay.client_nom }}</td>
                    <td>{{ stay.date_checkin.split(' ')[0] }}</td>
                    <td>{{ "%.0f"|format(stay.solde_actuel) }}</td>
                    <td>
                       <a href="{{ url_for('show_billing', stay_id=stay.id) }}" class="btn-sm">Facturer / Check-out</a>
                    </td>
                </tr>
            {% else %}
                <tr>
                    <td colspan="5" style="text-align: center; color: #777; padding: 2rem;">
                        Aucun s√©jour en cours pour le moment.
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
    </div>

    <div class="sidebar">
        <div class="widget-card">
            <h4>Arriv√©es Pr√©vues Aujourd'hui</h4>
            <ul class="simple-list">
                {% for arrival in todays_arrivals %}
                    <li>
                        <strong>{{ arrival.client_nom }}</strong><br>
                        <small>Chambre {{ arrival.numero }}</small>
                    </li>
                {% else %}
                    <li>Aucune arriv√©e pr√©vue.</li>
                {% endfor %}
            </ul>
        </div>
    </div>
</div>
{% endblock %}